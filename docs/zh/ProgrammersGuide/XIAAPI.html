

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>XIA API &mdash; PKUXIADAQ beta 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="PKU Code" href="PKUCode.html" />
    <link rel="prev" title="开发者指南" href="README.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PKUXIADAQ
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">简介</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">简介</a></li>
</ul>
<p class="caption"><span class="caption-text">程序安装</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../INSTALL.html">程序安装</a></li>
</ul>
<p class="caption"><span class="caption-text">用户指南</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/README.html">用户指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/Crate.html">机箱</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/FIRMWARE.html">固件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/Decode.html">数据解码</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/GUI.html">图形交互界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/NOGUI.html">非图形交互界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/OnlineStattics.html">在线统计</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/MakeEvent.html">MakeEvent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/FrontPanel.html">插件前面板</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/Logic.html">逻辑功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/MultipleModulesSynchronously.html">时间同步</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UsersGuide/UpdateCPLD.html">升级CPLD</a></li>
</ul>
<p class="caption"><span class="caption-text">应用案例</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Example/README.html">应用案例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/TOF2TAC.html">100M 模块测量飞行时间</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/TimeResolution.html">时间分辨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/RecommendedParameters.html">推荐参数</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/InBeamGammaCIAE.html">在束伽马谱学</a></li>
</ul>
<p class="caption"><span class="caption-text">采购建议</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ProcurementProposal.html">采购推荐</a></li>
</ul>
<p class="caption"><span class="caption-text">编程指南</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">开发者指南</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">XIA API</a></li>
<li class="toctree-l1"><a class="reference internal" href="PKUCode.html">PKU Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PKUXIADAQ</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>XIA API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/ProgrammersGuide/XIAAPI.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="xia-api">
<h1>XIA API<a class="headerlink" href="#xia-api" title="永久链接至标题">¶</a></h1>
<p>It from <strong>Programmer’s Manual Digital Gamma Finder (DGF) PIXIE-16</strong> <em>Version 1.40, October 2009</em></p>
<hr class="docutils" />
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Configure modules for communication in PXI chassis</span>
<span class="c1">// Use this function to configure the Pixie-16 modules in the PXI chassis.</span>
<span class="c1">// NumModules is the total number of Pixie-16 modules installed in the system. PXISlotMap is the pointer to an array that must have at least as many entries as there are Pixie-16 modules in the chassis.</span>
<span class="c1">// PXISlotMap serves as a simple mapping of the logical module number and the physical slot number that the modules reside in. The logical module number runs from 0. For instance, in a system with 5 Pixie-16 modules, these 5 modules may occupy slots 3 through 7. The user must fill PXISlotMap as follows: PXISlotMap = {3, 4, 5, 6, 7 ...} since module number 0 resides in slot number 3, etc. To find out in which slot a module is located, any piece of subsequent code can use the expression PXISlotMap[ModNum], where ModNum is the logic module number.</span>
<span class="c1">// OfflineMode is used to indicate to the API whether the system is running in OFFLINE mode (1) or ONLINE mode (0). OFFLINE mode is useful for situations where no Pixie-16 modules are present but users can still test their calls to the API functions in their application software.</span>
<span class="c1">// This function must be called as the first step in the boot process. It makes the modules known to the system and “opens” each module for communication.</span>
<span class="c1">// The function relies on an initialization file (pxisys.ini) that contains information about the Host PC’s PCI buses, including the slot enumeration scheme. XIA’s software distribution normally puts this file under the same folder as Pixie-16 software installation folder. However, the user has the flexibility of putting it in other folders by simply changing the definition of the string PCISysIniFile_Windows or PCISysIniFile_Linux in the header part of the file pixie16sys.c, depending on which operating system is being used.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16InitSystem</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">NumModules</span><span class="p">,</span>    <span class="c1">// total number of Pixie16 modules in the system</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">PXISlotMap</span><span class="p">,</span>   <span class="c1">// an array containing the PXI slot number for each pixie16 module</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">OfflineMode</span> <span class="p">);</span> <span class="c1">// specify if the system is in offline mode</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Release user virtual addressees assigned to modules</span>
<span class="c1">// Use this function to release the user virtual addressees that are assigned to Pixie-16 modules when these modules are initialized by function Pixie16InitSystem. This function should be called before a user’s application exits.</span>
<span class="c1">// If ModNum is set to less than the total number of modules in the system, only the module specified by ModNum will be closed. But if ModNum is equal to the total number of modules in the system, e.g. there are 5 modules in the chassis and ModNum = 5, then all modules in the system will be closed altogether. Note that the modules are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ExitSystem</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadModuleInfo</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">ModRev</span><span class="p">,</span>       <span class="c1">// returned module revision</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">ModSerNum</span><span class="p">,</span>    <span class="c1">// returned module serial number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">ModADCBits</span><span class="p">,</span>   <span class="c1">// returned module ADC bits</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">ModADCMSPS</span> <span class="p">);</span> <span class="c1">// returned module ADC sampling rate</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Boot modules so that they can be set up for data taking</span>
<span class="c1">// Use this function to boot Pixie-16 modules so that they can be set up for data taking. The function downloads to the Pixie-16 modules the communication FPGA configurations, signal processing FPGA configurations, trigger FPGA configurations (Revision A modules only), executable code for the digital signal processor (DSP), and DSP parameters.</span>
<span class="c1">// The FPGA configurations consist of a fixed number of words depending on the hardware mounted on the modules; the DSP codes have a length which depends on the actual compiled code; and the set of DSP parameters always consists of 1280 32-bit words for each module. The host software has to make the names of those boot data files on the hard disk available to the boot function.</span>
<span class="c1">// If ModNum is set to be less than the total number of modules in the system, only the module specified by ModNum will be booted. But if ModNum is equal to the total number of modules in the system, e.g. there are 5 modules in the chassis and ModNum = 5, then all modules in the system will be booted.</span>
<span class="c1">// The boot pattern is a bit mask (shown below) indicating which on-board chip will be booted. Under normal circumstances, all on-board chips should be booted, i.e. the boot pattern would be 0x7F. For Rev-B, C, D modules, bit 1, i.e., “Boot trigger FPGA”, will be ignored even if that bit is set to 1.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16BootModule</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">ComFPGAConfigFile</span><span class="p">,</span>      <span class="c1">// name of communications FPGA configuration file</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">SPFPGAConfigFile</span><span class="p">,</span>       <span class="c1">// name of signal processing FPGA configuration file</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">TrigFPGAConfigFile</span><span class="p">,</span>     <span class="c1">// name of trigger FPGA configuration file</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">DSPCodeFile</span><span class="p">,</span>            <span class="o">//</span> <span class="n">name</span> <span class="n">of</span> <span class="n">executable</span> <span class="n">code</span> <span class="n">file</span> <span class="k">for</span> <span class="n">digital</span> <span class="n">signal</span> <span class="n">processor</span> <span class="p">(</span><span class="n">DSP</span><span class="p">)</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">DSPParFile</span><span class="p">,</span>             <span class="c1">// name of DSP parameter file</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">DSPVarFile</span><span class="p">,</span>             <span class="c1">// name of DSP variable names file</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// pixie module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">BootPattern</span> <span class="p">);</span> <span class="c1">// boot pattern bit mask</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Acquire ADC traces in single or multiple modules</span>
<span class="c1">// Use this function to acquire ADC traces from Pixie-16 modules. Specify the module using ModNum. If ModNum is set to be less than the total number of modules in the system, only the module specified by ModNum will have its ADC traces acquired. But if ModNum is equal to the total number of modules in the system, then all modules in the system will have their ADC traces acquired.</span>
<span class="c1">// After the successful return of this function, the DSP&#39;s internal memory will be filled with ADC trace data. A user&#39;s application software should then call another function Pixie16ReadSglChanADCTrace to read the ADC trace data out to the host computer, channel by channel.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16AcquireADCTrace</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read ADC trace data from a channel in a module</span>
<span class="c1">// Use this function to read ADC trace data from a Pixie-16 module. Before calling this function, another function Pixie16AcquireADCTrace should be called to fill the DSP internal memory first. Also, the host code should allocate appropriate amount of memory to store the trace data. The ADC trace data length for each channel is 8192. Since the trace data are 16-bit unsigned integers (actually only the lower 14-bit contains real data due to the on-board 14-bit ADC), two consecutive 16-bit words are packed into one 32-bit word in the DSP internal memory. So for each channel, 4096 32-bit words are read out first from the DSP, and then each 32-bit word is unpacked to form two 16-bit words.</span>
<span class="c1">// Specify the module using ModNum and the channel on the module using ChanNum. Note that both the modules and channels are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadSglChanADCTrace</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">Trace_Buffer</span><span class="p">,</span> <span class="c1">// trace data</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">Trace_Length</span><span class="p">,</span>    <span class="c1">// trace length</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span> <span class="p">);</span>     <span class="c1">// channel number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Transfer data between host and DSP internal memory</span>
<span class="c1">// Use this function to directly transfer data between the host and the DSP internal memory of a Pixie-16 module. The DSP internal memory is split into two blocks with address range 0x40000 to 0x4FFFF for the first block and address range 0x50000 to 0x5FFFF for the second block. Within the first block, address range 0x40000 to 0x49FFF is reserved for program memory and shouldn’t be accessed directly by the host. Address range 0x4A000 to 0x4A4FF is used by the DSP I/O parameters which are stored in the configuration files (.set files) in the host. Within this range, 0x4A000 to 0x4A33F can be both read and written, but 0x4A340 to 0x4A4FF can only be read but not written. The remaining address range (0x4A500 to 4FFFF) in the first block and the entire second block (0x50000 to 0x5FFFF) should only be read but not written by the host. Use Direction = 1 for read and Direction = 0 for write.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16IMbufferIO</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">Buffer</span><span class="p">,</span>         <span class="c1">// buffer data</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">NumWords</span><span class="p">,</span>        <span class="c1">// number of buffer words to read or write</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">Address</span><span class="p">,</span>         <span class="c1">// buffer address</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Direction</span><span class="p">,</span>     <span class="c1">// I/O direction</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Transfer data between host and DSP external memory</span>
<span class="c1">// Use this function to directly read data from or write data to the on-board external memory of a Pixie-16 module. The valid memory address is from 0x0 to 0x7FFFF (32-bit wide). Use Direction = 1 for read and Direction = 0 for write.</span>
<span class="c1">// The external memory is used to store the histogram data accumulated for each of the 16 channels of a Pixie-16 module. Each channel has a fixed histogram length of 32768 words(32-bit wide), and the placement of the histogram data in the memory is in the same order of the channel number, i.e. channel 0 occupies memory address 0x0 to 0x7FFF, channel 1 occupies 0x8000 to 0xFFFF, and so on.</span>
<span class="c1">// NOTE: another function Pixie16ReadHistogramFromModule can also be used to read out the histograms except that it needs to be called channel by channel.</span>
<span class="c1">// In Rev-A modules, part of the external memory is also used to store the list mode data in ping-pong buffering mode. This function can be used to read list mode data from the buffers.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16EMbufferIO</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">Buffer</span><span class="p">,</span>         <span class="c1">// buffer data</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">NumWords</span><span class="p">,</span>        <span class="c1">// number of buffer words to read or write</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">Address</span><span class="p">,</span>         <span class="c1">// buffer address</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Direction</span><span class="p">,</span>     <span class="c1">// I/O direction</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Start a list mode data acquisition run</span>
<span class="c1">// Use this function to start a list mode data acquisition run in Pixie-16 modules. List mode run is used to collect data on an event-by-event basis, gathering energies, timestamps, pulse shape analysis values, and waveforms, for each event. Runs will continue until a preset number of events are reached or the user terminates the run by calling function Pixie16EndRun. Once the run is progress, if the run is set to terminate after a given number of events have been accumulated, another function, Pixie16CheckRunStatus, should be called to check if the run has finished. To start the data acquisition this function has to be called for every Pixie-16 module in the system. If all modules are to run synchronously, The last module addressed will release all others and the acquisition starts then. The first module to end the run will immediately stop the run in all other modules.</span>
<span class="c1">// Use mode=NEW_RUN (=1) to erase histograms and statistics information before launching the new run. Note that this will cause a start up delay of up to 1 millisecond. Use mode=RESUME_RUN (=0) to resume an earlier run. This mode has a start up delay of only a few microseconds.</span>
<span class="c1">// For Rev-A modules, currently there are 4 list mode run types supported. They are 0x100 (general purpose run), 0x101 (without waveforms), 0x102 (without auxiliary data) and 0x103 (energy and timestamp only).</span>
<span class="c1">// For Rev-B, C, D modules, there are only one list mode run type supported, that is, 0x100. However, different output data options can be chosen by enabling or disabling different CHANCSRA bits.</span>
<span class="c1">// Histograms and statistics data are updated incrementally from run to run provided RESUME_RUN mode is used.</span>
<span class="c1">// ModNum is the module number which starts counting at 0. If ModNum is set to be less than the total number of modules in the system, only the module specified by ModNum will have its list mode run started. But if ModNum is set to equal to the total number of modules in the system, then all modules in the system will have their runs started together.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16StartListModeRun</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">RunType</span><span class="p">,</span>       <span class="c1">// run type</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">mode</span> <span class="p">);</span>        <span class="c1">// run mode</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Start a MCA histogram mode data acquisition run</span>
<span class="c1">// Use this function to begin a data acquisition run that accumulates energy histograms, one for each channel. It launches a data acquisition run in which only energy information is preserved and histogrammed locally to each channel.</span>
<span class="c1">// Call this function for each Pixie-16 module in the system. The last module addressed will allow the actual data acquisition to begin. Histogram run can be self-terminating when the elapsed run time exceeds the preset run time, or the user can prematurely terminate the run by calling Pixie16EndRun. On completion, final histogram and statistics data will be available.</span>
<span class="c1">// Use mode=NEW_RUN (=1) to erase histograms and statistics information before launching the new run. Use mode=RESUME_RUN (=0) to resume an earlier run.</span>
<span class="c1">// ModNum is the module number which starts counting at 0. If ModNum is set to be less than the total number of modules in the system, only the module specified by ModNum will have its histogram run started. But if ModNum is set to be equal to the total number of modules in the system, then all modules in the system will have their runs started together.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16StartHistogramRun</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">mode</span> <span class="p">);</span>        <span class="c1">// run mode</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Check status of a data acquisition run</span>
<span class="c1">// Use this function to check the run status of a Pixie-16 module while a list mode data acquisition run is in progress. If the run is still in progress continue polling.</span>
<span class="c1">// If the return code of this function indicates the run has finished, there might still be some data in the external memory (Rev-A modules) or external FIFO (Rev-B, C, D modules) that need to be read out to the host. In addition, final run statistics and histogram data are available for reading out too.</span>
<span class="c1">// In MCA histogram run mode, this function can also be called to check if the run is still in progress even though it is normally self-terminating.</span>
<span class="c1">// ModNum is the module number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16CheckRunStatus</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// Pixie module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Stop a data acquisition run</span>
<span class="c1">// Use this function to end a histogram run, or to force the end of a list mode run. In a multi-module system, if all modules are running synchronously, only one module needs to be addressed this way. It will immediately stop the run in all other module in the system.</span>
<span class="c1">// ModNum is the module number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16EndRun</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// Pixie module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Compute input count rate</span>
<span class="c1">// Use this function to calculate the input count rate on one channel of a Pixie-16 module. This function does not communicate with Pixie-16 modules. Before calling this function, another function, Pixie16ReadStatisticsFromModule, should be called to read statistics data from the module first.</span>
<span class="c1">// *Statistics is a pointer to an array whose size is exactly 448 unsigned integer words (32-bit). The *Statistics array is filled with data from a Pixie-16 module after calling function Pixie16ReadStatisticsFromModule. ModNum is the module number which starts counting at 0. ChanNum is the channel number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">double</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ComputeInputCountRate</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">Statistics</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Compute output count rate of a channel</span>
<span class="c1">// Use this function to calculate the output count rate on one channel of a Pixie-16 module. This function does not communicate with Pixie-16 modules. Before calling this function, another function, Pixie16ReadStatisticsFromModule, should be called to read statistics data from the module first.</span>
<span class="c1">// *Statistics is a pointer to an array whose size is exactly 448 unsigned integer words (32-bit). The *Statistics array is filled with data from a Pixie-16 module after calling function Pixie16ReadStatisticsFromModule. ModNum is the module number which starts counting at 0. ChanNum is the channel number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">double</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ComputeOutputCountRate</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">Statistics</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Compute live time that a channel accumulated in a run</span>
<span class="c1">// Use this function to calculate the live time that one channel of a Pixie-16 module has spent on data acquisition. This function does not communicate with Pixie-16 modules. Before calling this function, another function, Pixie16ReadStatisticsFromModule, should be called to read statistics data from the module first.</span>
<span class="c1">// *Statistics is a pointer to an array whose size is exactly 448 unsigned integer words (32-bit). The *Statistics array is filled with data from a Pixie-16 module after calling function Pixie16ReadStatisticsFromModule. ModNum is the module number which starts counting at 0. ChanNum is the channel number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">double</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ComputeLiveTime</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">Statistics</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Compute number of events processed by a channel</span>
<span class="c1">// Use this function to calculate the number of events that have been processed by a Pixie-16 module during a data acquisition run. This function is only used by Rev-A modules. This function does not communicate with Pixie-16 modules. Before calling this function, another function, Pixie16ReadStatisticsFromModule, should be called to read statistics data from the module first.</span>
<span class="c1">// *Statistics is a pointer to an array whose size is exactly 448 unsigned integer words (32-bit). The *Statistics array is filled with data from a Pixie-16 module after calling function Pixie16ReadStatisticsFromModule. ModNum is the module number which starts counting at 0. ChanNum is the channel number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">double</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ComputeProcessedEvents</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">Statistics</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Compute real time that a channel accumulated in a run</span>
<span class="c1">// Use this function to calculate the real time that a Pixie-16 module has spent on data acquisition. This function does not communicate with Pixie-16 modules. Before calling this function, another function, Pixie16ReadStatisticsFromModule, should be called to read statistics data from the module first.</span>
<span class="c1">// *Statistics is a pointer to an array whose size is exactly 448 unsigned integer words (32-bit). The *Statistics array is filled with data from a Pixie-16 module after calling function Pixie16ReadStatisticsFromModule. ModNum is the module number which starts counting at 0. ChanNum is the channel number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">double</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ComputeRealTime</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">Statistics</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16complexFFT</span> <span class="p">(</span>
      <span class="kt">double</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">length</span> <span class="p">);</span>

<span class="c1">// Test one bit of a 16-bit unsigned integer</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">PIXIE16APP_API</span> <span class="nf">APP16_TstBit</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bit</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">value</span> <span class="p">);</span>

<span class="c1">// Set one bit of a 16-bit unsigned integer</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">PIXIE16APP_API</span> <span class="nf">APP16_SetBit</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bit</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">value</span> <span class="p">);</span>

<span class="c1">// Clear one bit of a 16-bit unsigned integer</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">PIXIE16APP_API</span> <span class="nf">APP16_ClrBit</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bit</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">value</span> <span class="p">);</span>

<span class="c1">// Set one bit of a 32-bit unsigned integer</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">APP32_SetBit</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bit</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">value</span> <span class="p">);</span>

<span class="c1">// Clear one bit of a 32-bit unsigned integer</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">APP32_ClrBit</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bit</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">value</span> <span class="p">);</span>

<span class="c1">// Test one bit of a 32-bit unsigned integer</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">APP32_TstBit</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bit</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">value</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Program on-board DACs</span>
<span class="c1">// Use this function to reprogram the on-board digital to analog converters (DAC) of the Pixie-16 modules. In this operation the DSP uses data from the DSP parameters that were previously downloaded.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16SetDACs</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Program on-board signal processing FPGAs</span>
<span class="c1">// Use this function to program the on-board signal processing FPGAs of the Pixie-16 modules. After the host computer has written the DSP parameters to the DSP memory, the DSP needs to write some of these parameters to the FPGAs. This function makes the DSP perform that action.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ProgramFippi</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Adjust DC-offsets in single or multiple modules</span>
<span class="c1">// Use this function to adjust the DC-offsets of Pixie-16 modules. Specify the module using ModNum. If ModNum is set to be less than the total number of modules in the system, only the module specified by ModNum will have its DC-offsets adjusted. But if ModNum is set to be equal to the total number of modules in the system, then all modules in the system will have their DC-offsets adjusted.</span>
<span class="c1">// After the DC-offset levels have been adjusted, the baseline level of the digitized input signals will be determined by the DSP parameter BaselinePercent. For instance, if BaselinePercent is set to 10(%), the baseline level of the input signals will be ~ 1638 on the 14-bit ADC scale (minimum: 0; maximum: 16383).</span>
<span class="c1">// The main purpose of this function is to ensure the input signals fall within the voltage range of the ADCs to ensure all input signals can be digitized by the ADCs properly.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16AdjustOffsets</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Acquire baselines from a module</span>
<span class="c1">// Use this function to acquire baselines from Pixie-16 modules. Specify the module using ModNum. If ModNum is set to be less than the total number of modules in the system, only the module specified by ModNum will have its baselines acquired. But if ModNum is set to be equal to the total number of modules in the system, then all modules in the system will have their baselines acquired.</span>
<span class="c1">// After the successful return of this function, the DSP’s internal memory will be filled with baselines data. Users should then call another function Pixie16ReadSglChanBaselines to read the baselines data out to the host computer, channel by channel.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16AcquireBaselines</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read baselines from a channel in a module</span>
<span class="c1">// Use this function to read baselines data from a Pixie-16 module. Before calling this function, another function Pixie16AcquireBaselines should be called to fill the DSP internal memory first. Also, the host code should allocate appropriate amount of memory to store the baseline data. The baselines data length for each channel is 3640. In the DSP internal memory, each baseline data is a 32-bit IEEE floating point number. After being read out to the host, this function will convert each baseline data to a decimal number. In addition to baseline values, timestamps corresponding to each baseline were also returned after this function call.</span>
<span class="c1">// Specify the module using ModNum and the channel on the module using ChanNum. Note that the modules and channels are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadSglChanBaselines</span> <span class="p">(</span>
      <span class="kt">double</span> <span class="o">*</span><span class="n">Baselines</span><span class="p">,</span>            <span class="c1">// returned baselines values</span>
      <span class="kt">double</span> <span class="o">*</span><span class="n">TimeStamps</span><span class="p">,</span>           <span class="c1">// time stamp for each baseline value</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">NumBases</span><span class="p">,</span>      <span class="c1">// number of baseline values to read</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span> <span class="p">);</span>     <span class="c1">// channel number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Ramp Offset DACs of a module and record the baselines</span>
<span class="c1">// Use this function to execute the RAMP_OFFSETDACS control task run. Each Offset DAC has 65536 steps, and the RAMP_OFFSETDACS control task ramps the DAC from 0 to 65335 with a step size of 64, i.e., a total of 1024 steps. At each DAC step, the control task computes the baseline value as the representation of the signal baseline and stores it in the DSP memory. After the control task is finished, the stored baseline values are read out to the host computer and saved to a binary file called “rampdacs.bin” in the form of IEEE 32-bit floating point numbers. Users can then plot the baseline values vs. DAC steps to determine the appropriate DAC value to be set in the DSP in order to bring the input signals into the voltage range of the ADCs. However, this function is no longer needed due to the introduction of function Pixie16AdjustOffsets.</span>
<span class="c1">// If ModNum is set to less than the total number of modules in the system, only the module specified by ModNum will start the RAMP_OFFSETDACS control task run. But if ModNum is equal to the total number of modules in the system, e.g. there are 5 modules in the chassis and ModNum = 5, then all modules in the system will start the RAMP_OFFSETDACS control task run. Note that the modules are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16RampOffsetDACs</span> <span class="p">(</span>
      <span class="kt">double</span> <span class="o">*</span><span class="n">DCValues</span><span class="p">,</span>             <span class="c1">// returned DC offset values</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">NumDCVals</span><span class="p">,</span>     <span class="c1">// number of DC values to read</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Execute special control tasks</span>
<span class="c1">// Use this function to call special control tasks. This may include programming the Fippi or setting the DACs after downloading DSP parameters.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ControlTaskRun</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// Pixie module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ControlTask</span><span class="p">,</span>   <span class="c1">// Control task number</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">Max_Poll</span> <span class="p">);</span>    <span class="c1">// Timeout control in unit of ms for control task run</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Find the Baseline Cut values of a module</span>
<span class="c1">// Use this function to find the Baseline Cut value for one channel of a Pixie-16 module. The baseline cut value is then downloaded to the DSP, where baselines are captured and averaged over time. The cut value would prevent a bad baseline value from being used in the averaging process, i.e., if a baseline value is outside the baseline cut range, it will not be used for computing the baseline average. Averaging baselines over time improves energy resolution measurement.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16BLcutFinder</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// Pixie module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span><span class="p">,</span>       <span class="c1">// Pixie channel number</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">BLcut</span> <span class="p">);</span>      <span class="c1">// BLcut return value</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Find the exponential decay time of a channel</span>
<span class="c1">// Use this function to find the exponential decay time constant (Tau value) of the detector or preamplifier signal that is connected to one channel of a Pixie-16 module. The found Tau value is returned via pointer *Tau.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16TauFinder</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// Pixie module number</span>
      <span class="kt">double</span>         <span class="o">*</span><span class="n">Tau</span> <span class="p">);</span>        <span class="c1">// 16 returned Tau values, in 祍</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Write a MODULE level parameter to a module</span>
<span class="c1">// Use this function to write a module parameter to a Pixie-16 module.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16WriteSglModPar</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">ModParName</span><span class="p">,</span>             <span class="c1">// the name of the module parameter</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">ModParData</span><span class="p">,</span>    <span class="c1">// the module parameter value to be written to the module</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read a MODULE level parameter from a module</span>
<span class="c1">// Use this function to read a module parameter from a Pixie-16 module.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadSglModPar</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">ModParName</span><span class="p">,</span>             <span class="c1">// the name of the module parameter</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">ModParData</span><span class="p">,</span>   <span class="c1">// the module parameter value to be read from the module</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Write a CHANNEL level parameter to a module</span>
<span class="c1">// Use this function to write a channel parameter to a Pixie-16 module.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16WriteSglChanPar</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">ChanParName</span><span class="p">,</span>            <span class="c1">// the name of the channel parameter</span>
      <span class="kt">double</span> <span class="n">ChanParData</span><span class="p">,</span>           <span class="c1">// the channel parameter value to be written to the module</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span> <span class="p">);</span>     <span class="c1">// channel number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read a CHANNEL level parameter from a module</span>
<span class="c1">// Use this function to read a channel parameter from a Pixie-16 module.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadSglChanPar</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">ChanParName</span><span class="p">,</span>            <span class="c1">// the name of the channel parameter</span>
      <span class="kt">double</span> <span class="o">*</span><span class="n">ChanParData</span><span class="p">,</span>          <span class="c1">// the channel parameter value to be read from the module</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span> <span class="p">);</span>     <span class="c1">// channel number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read histogram data from a module</span>
<span class="c1">// Use this function to read out the histogram data from a Pixie-16 module’s histogram memory. Before calling this function, the host code should allocate appropriate amount of memory to store the histogram data. The default histogram length is 32768. Histogram data are 32-bit unsigned integers.</span>
<span class="c1">// Specify the module using ModNum and the channel on the module using ChanNum. Note that both the modules and channels are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadHistogramFromModule</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">Histogram</span><span class="p">,</span>    <span class="c1">// histogram data</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">NumWords</span><span class="p">,</span>      <span class="c1">// number of words to be read out</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span><span class="p">);</span>      <span class="c1">// channel number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read run statistics data from a module</span>
<span class="c1">// Use this function to read out statistics data from a Pixie-16 module. Before calling this function, the host code should allocate appropriate amount of memory to store the statistics data. The number of statistics data for each module is fixed at 448. Statistics data are 32-bit unsigned integers.</span>
<span class="c1">// Specify the module using ModNum. Note that the modules are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadStatisticsFromModule</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">Statistics</span><span class="p">,</span>   <span class="c1">// run statistics data</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read histogram data from a module and save to a file</span>
<span class="c1">// Use this function to read histogram data from a Pixie-16 module and save the data to a file. New data will be appended to the end of the file. So the same file name can be used for multiple modules and the data from each module will be stored in the order that this function is called.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16SaveHistogramToFile</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>               <span class="c1">// histogram data file name</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">);</span>       <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Parse a list mode data file to get events information</span>
<span class="c1">// Use this function to parse the list mode events in the list mode data file. The number of events for each module will be reported.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16GetModuleEvents</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>               <span class="o">//</span> <span class="n">the</span> <span class="n">list</span> <span class="n">mode</span> <span class="n">data</span> <span class="n">file</span> <span class="n">name</span> <span class="p">(</span><span class="n">with</span> <span class="n">complete</span> <span class="n">path</span><span class="p">)</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ModuleEvents</span> <span class="p">);</span> <span class="c1">// receives number of events for each module</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Get detailed events information from a data file</span>
<span class="c1">// Use this function to retrieve the detailed information of each event in the list mode data file for the designated module. Before calling this function to get the individual events information, another function Pixie16GetModuleEvents should be called first to determine the number of events that have been recorded for each module. If the number of events for a given module is nEvents, a memory block *EventInformation should be allocated with a length of (nEvents*68):</span>
<span class="c1">// EventInformation = (unsigned long *)malloc(sizeof(unsigned long) * nEvents * 68);</span>
<span class="c1">// where 68 is the length of the information records of each event (energy, timestamps, etc.) and has the following structure.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16GetEventsInfo</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>                   <span class="o">//</span> <span class="n">the</span> <span class="n">list</span> <span class="n">mode</span> <span class="n">data</span> <span class="n">file</span> <span class="n">name</span> <span class="p">(</span><span class="n">with</span> <span class="n">complete</span> <span class="n">path</span><span class="p">)</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">EventInformation</span><span class="p">,</span> <span class="c1">// to hold event information</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModuleNumber</span><span class="p">);</span>     <span class="c1">// the module whose events are to be retrieved</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read trace data from a list mode data file</span>
<span class="c1">// Use this function to retrieve list mode trace from a list mode data file. It uses the trace length and file location information obtained from function Pixie16GetEventsInfo for the selected event.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadListModeTrace</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>               <span class="c1">// list mode data file name</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">Trace_Data</span><span class="p">,</span>   <span class="o">//</span> <span class="n">list</span> <span class="n">mode</span> <span class="n">trace</span> <span class="n">data</span> <span class="p">(</span><span class="mi">16</span><span class="o">-</span><span class="n">bit</span> <span class="n">words</span><span class="p">)</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">NumWords</span><span class="p">,</span>      <span class="c1">// number of 16-bit words to be read out</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">FileLocation</span><span class="p">);</span> <span class="c1">// the location of the trace in the file</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read histogram data from a histogram data file</span>
<span class="c1">// Use this function to read histogram data from a histogram data file. Before calling this function, the host code should allocate appropriate amount of memory to store the histogram data. The default histogram length is 32768. Histogram data are 32-bit unsigned integers.</span>
<span class="c1">// Specify the module using ModNum and the channel on the module using ChanNum. Note that both the modules and channels are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadHistogramFromFile</span> <span class="p">(</span>
      <span class="kt">char</span>  <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>              <span class="o">//</span> <span class="n">the</span> <span class="n">histogram</span> <span class="n">data</span> <span class="n">file</span> <span class="n">name</span> <span class="p">(</span><span class="n">with</span> <span class="n">complete</span> <span class="n">path</span><span class="p">)</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">Histogram</span><span class="p">,</span>      <span class="c1">// histogram data</span>
      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">NumWords</span><span class="p">,</span>        <span class="c1">// number of words to be read out</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChanNum</span><span class="p">);</span>      <span class="c1">// channel number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read DSP parameters from modules and save to a file</span>
<span class="c1">// Use this function to save DSP parameters to a settings file. It will first read the values of DSP parameters on each Pixie-16 module and then write them to the settings file. Each module has exactly 1280 DSP parameter values (32-bit unsigned integers), and depending on the value of PRESET_MAX_MODULES (defined in pixie16app_defs.h), the settings file should have exactly (1280 * PRESET_MAX_MODULES * 4) bytes when stored on the computer hard drive.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16SaveDSPParametersToFile</span> <span class="p">(</span>
      <span class="kt">char</span>  <span class="o">*</span><span class="n">FileName</span> <span class="p">);</span>            <span class="c1">// the DSP parameters file name (with complete path)</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Load DSP parameters to modules from a file</span>
<span class="c1">// Use this function to read DSP parameters from a settings file and then download the settings to Pixie-16 modules that are installed in the system. Each module has exactly 1280 DSP parameter values (32-bit unsigned integers), and depending on the value of PRESET_MAX_MODULES (defined in pixie16app_defs.h), the settings file should have exactly (1280 * PRESET_MAX_MODULES * 4) bytes when stored on the computer hard drive.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16LoadDSPParametersFromFile</span> <span class="p">(</span>
      <span class="kt">char</span>  <span class="o">*</span><span class="n">FileName</span> <span class="p">);</span>            <span class="c1">// the DSP parameters file name (with complete path)</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Copy DSP parameters from a module to others</span>
<span class="c1">// Use this function to copy DSP parameters from one module to the others that are installed in the system.</span>
<span class="c1">// BitMask is bit pattern which designates which items should be copied from the source module to the destination module(s).</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16CopyDSPParameters</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">BitMask</span><span class="p">,</span>             <span class="c1">// copy items bit mask</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SourceModule</span><span class="p">,</span>        <span class="c1">// source module</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SourceChannel</span><span class="p">,</span>       <span class="c1">// source channel</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">DestinationMask</span> <span class="p">);</span>  <span class="c1">// the destination module and channel bit mask</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadMSGFile</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">ReturnMsgStr</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Convert a decimal into IEEE 32-bit floating point number</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Decimal2IEEEFloating</span><span class="p">(</span><span class="kt">double</span> <span class="n">DecimalNumber</span><span class="p">);</span>

<span class="c1">// Convert an IEEE 32-bit floating point number to a decimal</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">double</span> <span class="n">PIXIE16APP_API</span> <span class="nf">IEEEFloating2Decimal</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">IEEEFloatingNumber</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read data from external FIFO and save to a file</span>
<span class="c1">// Use this function to read data from the external FIFO of a module. This function can only be used for Pixie-16 Revision-B, C, and D modules.</span>
<span class="c1">// This function first checks the status of the external FIFO of a Pixie-16 module, and if there are data in the external FIFO, this function then reads list mode data (32-bit unsigned integers) from the external FIFO. So this function essentially encapsulates both functions Pixie16CheckExternalFIFOStatus and Pixie16ReadDataFromExternalFIFO within one function. The number of words that are read from the external FIFO is recorded in variable*FIFOWords.</span>
<span class="c1">// The function also expects setting the value of a variable called “EndOfRunRead” to indicate whether this read is at the end of a run (1) or during the run (0). This is necessary since the external FIFO needs special treatment when the host reads the last few words from the external FIFO due to its pipelined structure.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16SaveExternalFIFODataToFile</span> <span class="p">(</span>
      <span class="kt">char</span> <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>               <span class="c1">// list mode data file name</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">nFIFOWords</span><span class="p">,</span>   <span class="c1">// number of words read from external FIFO</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// module number</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">EndOfRunRead</span><span class="p">);</span> <span class="c1">// indicator whether this is the end of run read</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read from or write to registers on a module</span>
<span class="c1">// Use this function to read data from or write data to a register in a Pixie-16 module.</span>
<span class="c1">// Specify the module using ModNum. Note that the modules are counted starting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16RegisterIO</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>        <span class="c1">// the Pixie module to communicate to</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">address</span><span class="p">,</span>       <span class="c1">// register address</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">direction</span><span class="p">,</span>     <span class="c1">// either MOD_READ or MOD_WRITE</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">value</span> <span class="p">);</span>      <span class="c1">// holds or receives the data</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read Control &amp; Status Register value from a module</span>
<span class="c1">// Use this function to read the host Control &amp; Status Register (CSR) value.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadCSR</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">CSR</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Write to Control &amp; Status Register in a module</span>
<span class="c1">// Use this function to write a value to the host Control &amp; Status Register (CSR).</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16WriteCSR</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">CSR</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Check status of external FIFO of a module</span>
<span class="c1">// Use this function to check the status of the external FIFO of a Pixie-16 module while a list mode data acquisition run is in progress. The function returns the number of words (32-bit) that the external FIFO currently has. If the number of words is greater than a user-set threshold, function Pixie16ReadDataFromExternalFIFO can then be used to read the data from the external FIFO. The threshold can be set by the user to either minimize reading overhead or to read data out of the FIFO as quickly as possible.</span>
<span class="c1">// *nFIFOWords returns the number of 32-bit words that the external FIFO currently has.</span>
<span class="c1">// ModNum is the module number which starts counting at 0.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16CheckExternalFIFOStatus</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">nFIFOWords</span><span class="p">,</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Read data from external FIFO of a module</span>
<span class="c1">// Use this function to read data from the external FIFO of a module. This function can only be used for Pixie-16 Revision-B, C, and D modules.</span>
<span class="c1">// This function reads list mode data from the external FIFO of a Pixie-16 module. The data are 32-bit unsigned integers. Normally, function Pixie16CheckExternalFIFOStatus is called first to see how many words the external FIFO currently has, then this function is called to read the data from the FIFO.</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ReadDataFromExternalFIFO</span> <span class="p">(</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="o">*</span><span class="n">ExtFIFO_Data</span><span class="p">,</span> <span class="c1">// To receive the external FIFO data</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">nFIFOWords</span><span class="p">,</span>    <span class="c1">// number of words to read from external FIFO</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModNum</span> <span class="p">);</span>      <span class="c1">// module number</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ComputeFastFiltersOffline</span> <span class="p">(</span>
      <span class="kt">char</span>           <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>          <span class="o">//</span> <span class="n">the</span> <span class="n">list</span> <span class="n">mode</span> <span class="n">data</span> <span class="n">file</span> <span class="n">name</span> <span class="p">(</span><span class="n">with</span> <span class="n">complete</span> <span class="n">path</span><span class="p">)</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModuleNumber</span><span class="p">,</span>       <span class="c1">// the module whose events are to be analyzed</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChannelNumber</span><span class="p">,</span>      <span class="c1">// the channel whose events are to be analyzed</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">FileLocation</span><span class="p">,</span>       <span class="c1">// the location of the trace in the file</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">RcdTraceLength</span><span class="p">,</span>     <span class="c1">// recorded trace length</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">RcdTrace</span><span class="p">,</span>          <span class="c1">// recorded trace</span>
      <span class="kt">double</span>         <span class="o">*</span><span class="n">fastfilter</span><span class="p">,</span>        <span class="c1">// fast filter response</span>
      <span class="kt">double</span>         <span class="o">*</span><span class="n">cfd</span> <span class="p">);</span>             <span class="c1">// cfd response</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">Pixie16ComputeSlowFiltersOffline</span> <span class="p">(</span>
      <span class="kt">char</span>           <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>          <span class="o">//</span> <span class="n">the</span> <span class="n">list</span> <span class="n">mode</span> <span class="n">data</span> <span class="n">file</span> <span class="n">name</span> <span class="p">(</span><span class="n">with</span> <span class="n">complete</span> <span class="n">path</span><span class="p">)</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModuleNumber</span><span class="p">,</span>       <span class="c1">// the module whose events are to be analyzed</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChannelNumber</span><span class="p">,</span>      <span class="c1">// the channel whose events are to be analyzed</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">FileLocation</span><span class="p">,</span>       <span class="c1">// the location of the trace in the file</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">RcdTraceLength</span><span class="p">,</span>     <span class="c1">// recorded trace length</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">RcdTrace</span><span class="p">,</span>          <span class="c1">// recorded trace</span>
      <span class="kt">double</span>         <span class="o">*</span><span class="n">slowfilter</span> <span class="p">);</span>      <span class="c1">// slow filter response</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Add by Hongyi Wu</span>
<span class="n">PIXIE16APP_EXPORT</span> <span class="kt">int</span> <span class="n">PIXIE16APP_API</span> <span class="nf">HongyiWuPixie16ComputeSlowFiltersOffline</span> <span class="p">(</span>
      <span class="kt">char</span>           <span class="o">*</span><span class="n">FileName</span><span class="p">,</span>          <span class="o">//</span> <span class="n">the</span> <span class="n">list</span> <span class="n">mode</span> <span class="n">data</span> <span class="n">file</span> <span class="n">name</span> <span class="p">(</span><span class="n">with</span> <span class="n">complete</span> <span class="n">path</span><span class="p">)</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ModuleNumber</span><span class="p">,</span>       <span class="c1">// the module whose events are to be analyzed</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ChannelNumber</span><span class="p">,</span>      <span class="c1">// the channel whose events are to be analyzed</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">FileLocation</span><span class="p">,</span>       <span class="c1">// the location of the trace in the file</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">RcdTraceLength</span><span class="p">,</span>     <span class="c1">// recorded trace length</span>
      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">RcdTrace</span><span class="p">,</span>          <span class="c1">// recorded trace</span>
      <span class="kt">double</span>         <span class="o">*</span><span class="n">slowfilter</span><span class="p">,</span>        <span class="c1">// slow filter response</span>
      <span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">bl</span><span class="p">,</span>
      <span class="kt">double</span>         <span class="n">sl</span><span class="p">,</span>
      <span class="kt">double</span>         <span class="n">sg</span><span class="p">,</span>
      <span class="kt">double</span>         <span class="n">tau</span><span class="p">,</span>
      <span class="kt">int</span>            <span class="n">sfr</span><span class="p">,</span>
      <span class="kt">int</span>            <span class="n">pointtobl</span> <span class="p">);</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PKUCode.html" class="btn btn-neutral float-right" title="PKU Code" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="README.html" class="btn btn-neutral float-left" title="开发者指南" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Hongyi Wu(吴鸿毅)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>